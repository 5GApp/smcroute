##  smcroute - static multicast routing control 
##  Copyright (C) 2001-2005 Carsten Schill <carsten@cschill.de>
##  Copyright (C) 2006-2009 Julien BLACHE <jb@jblache.org>
##  Copyright (C) 2009      Todd Hayton <todd.hayton@gmail.com>
##  Copyright (C) 2009-2011 Micha Lenk <micha@debian.org>

CC = @CC@
CFLAGS = @CFLAGS@
BINDIR = /usr/sbin
#CFLAGS = -g -O2 -Wall
#CFLAGS = -g -Wall -DHOST_OS_LINUX -DHAVE_LINUX_MROUTE6_H

default: build.h smcroute

all: smcroute mcsender

clean:
	-@rm -f *~ *.o *.asm build.h smcroute mcsender

install: 
	@mkdir -p ${BINDIR}
	@cp smcroute mcsender ${BINDIR}

mcsender:  mcsender.o syslog.o config.h

smcroute:  smcroute.o mroute-api.o ifvc.o cmdpkt.o ipc.o syslog.o udpsock.o mcgroup.o parse-conf.o
smcroute.c: build.h config.h 

build.h:  
	@echo '#define BUILD "' `date +%y%m%d` '"' >build.h

config.h:
	@echo "Please run ./configure first"
